"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4292],{4292:(E,h,s)=>{s.r(h),s.d(h,{SignInPageModule:()=>U});var f=s(177),d=s(9417),r=s(4742),p=s(7500),m=s(467),n=s(4438),C=s(3205),M=s(8721),P=s(3302),b=s(6083),O=s(8150),_=s(8035);function I(o,c){if(1&o&&(n.j41(0,"ion-grid",14)(1,"ion-row")(2,"ion-col",15),n.nrm(3,"ion-icon",16),n.j41(4,"p"),n.EFF(5),n.j41(6,"b"),n.EFF(7,"Verifique os dados e tente novamente."),n.k0s()()()()()),2&o){const g=n.XpG();n.R7$(5),n.SpI("",g.errorMessage," ")}}function S(o,c){if(1&o&&(n.j41(0,"ion-select-option",17),n.EFF(1),n.k0s()),2&o){const g=c.$implicit;n.Y8G("value",g),n.R7$(),n.SpI(" ",g.name," ")}}function k(o,c){if(1&o){const g=n.RV6();n.j41(0,"a",18),n.bIt("click",function(){n.eBV(g);const e=n.XpG();return n.Njj(e.openSupportUrl())}),n.EFF(1,"Entre em contato."),n.k0s()}}const v=[{path:"",component:(()=>{var o;class c{constructor(t,e,a,l,i,u,j,F,w,x){this.auth=t,this.loadingCtrl=e,this.connection=a,this.customersService=l,this.api=i,this.utilsService=u,this.messages=j,this.cdr=F,this.router=w,this.route=x,this.cities=[],this.anyError=!1,this.errorMessage="",this.isOnline=!0,this.supportUrl="",this.credentials="",this.password=""}ngOnInit(){var t=this;return(0,m.A)(function*(){t.route.params.subscribe(()=>{t.changeInputMunicipios()})})()}changeInputMunicipios(){var t=this;return(0,m.A)(function*(){t.isOnline=t.connection.isOnline,t.connection.eventOnline.subscribe(e=>{t.isOnline=e,t.isOnline?t.getCustomers():(t.selectedCity=void 0,t.messages.showToast("Sem conex\xe3o!",1e3,"top"))}),t.isOnline&&t.getCustomers()})()}updateSupportUrl(){null!=this.selectedCity&&this.api.setServerUrl(this.selectedCity.url),this.supportUrl=this.selectedCity?this.selectedCity.support_url||"https://portabilis.freshdesk.com/":""}getCustomers(){this.customersService.getCustomers().subscribe(t=>{this.cities=t,this.cdr.detectChanges()})}loginForm(t){var e=this;return(0,m.A)(function*(){const a=e.credentials,l=e.password,i=yield e.loadingCtrl.create({message:"Carregando ...",duration:3e3});yield i.present(),e.auth.signIn(a,l).subscribe({next:u=>{u?e.auth.setCurrentUser(u).subscribe({next:()=>{e.router.navigate(["/tabs/tab1"])}}):(e.anyError=!0,e.errorMessage=" ")},error:u=>{console.log(u),e.anyError=!0,e.errorMessage="N\xe3o foi poss\xedvel efetuar login."},complete:()=>{i.dismiss()}})})()}greetingText(){let a=this.utilsService.getCurrentDate().getHours(),l="bom dia";return a>=12&&a<=17?l="boa tarde":a>=17&&(l="boa noite"),`Ol\xe1, ${l}!`}openSupportUrl(){var t=this;return(0,m.A)(function*(){yield t.utilsService.openUrl(t.supportUrl)})()}}return(o=c).\u0275fac=function(t){return new(t||o)(n.rXU(C.u),n.rXU(r.Xi),n.rXU(M.K),n.rXU(P.h),n.rXU(b.G),n.rXU(O.T),n.rXU(_.G),n.rXU(n.gRc),n.rXU(p.Ix),n.rXU(p.nX))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-sign-in"]],decls:21,vars:7,consts:[["f","ngForm"],[1,"login-background"],[1,"background-content"],[1,"greetings"],["class","form-errors",4,"ngIf"],[1,"form-login"],[1,"inputs"],["placeholder","Munic\xedpio","name","serverUrl","id","serverUrl","required","",1,"select-city",3,"ionChange","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Email ou CPF","name","credential","id","credential","required","",3,"ngModelChange","ngModel"],["type","password","name","password","id","password","placeholder","Senha","required","",3,"ngModelChange","ngModel"],["expand","block",1,"button-login",3,"click"],[1,"contato"],[3,"click",4,"ngIf"],[1,"form-errors"],[1,"form-errors-content"],["name","close"],[3,"value"],[3,"click"]],template:function(t,e){if(1&t){const a=n.RV6();n.j41(0,"ion-content",1)(1,"div",2)(2,"h2",3),n.EFF(3),n.k0s(),n.DNE(4,I,8,1,"ion-grid",4),n.j41(5,"form",5,0)(7,"ion-list")(8,"ion-item",6)(9,"ion-select",7),n.bIt("ionChange",function(){return n.eBV(a),n.Njj(e.updateSupportUrl())}),n.mxI("ngModelChange",function(i){return n.eBV(a),n.DH7(e.selectedCity,i)||(e.selectedCity=i),n.Njj(i)}),n.DNE(10,S,2,2,"ion-select-option",8),n.k0s()(),n.j41(11,"ion-item",6)(12,"ion-input",9),n.mxI("ngModelChange",function(i){return n.eBV(a),n.DH7(e.credentials,i)||(e.credentials=i),n.Njj(i)}),n.k0s()(),n.j41(13,"ion-item",6)(14,"ion-input",10),n.mxI("ngModelChange",function(i){return n.eBV(a),n.DH7(e.password,i)||(e.password=i),n.Njj(i)}),n.k0s()()(),n.j41(15,"ion-button",11),n.bIt("click",function(){n.eBV(a);const i=n.sdS(6);return n.Njj(e.loginForm(i))}),n.EFF(16," Entrar "),n.k0s()(),n.j41(17,"h3",12),n.EFF(18," Voc\xea n\xe3o lembra o acesso?"),n.nrm(19,"br"),n.DNE(20,k,2,0,"a",13),n.k0s()()()}2&t&&(n.R7$(3),n.JRh(e.greetingText()),n.R7$(),n.Y8G("ngIf",e.anyError),n.R7$(5),n.R50("ngModel",e.selectedCity),n.R7$(),n.Y8G("ngForOf",e.cities),n.R7$(2),n.R50("ngModel",e.credentials),n.R7$(2),n.R50("ngModel",e.password),n.R7$(6),n.Y8G("ngIf",e.supportUrl))},dependencies:[f.Sq,f.bT,d.qT,d.BC,d.cb,d.YS,d.vS,d.cV,r.Jm,r.hU,r.W9,r.lO,r.iq,r.$w,r.uz,r.nf,r.ln,r.Nm,r.Ip,r.Je,r.Gw],styles:[".login-background[_ngcontent-%COMP%]{--background: #6e00b5 !important}.background-content[_ngcontent-%COMP%]{background-image:url(ilusta@3x.c6419400e7341512.png)!important;background-repeat:no-repeat;background-size:100%;background-color:transparent!important;max-width:320pt;width:90.6%;min-height:41.7%;margin:11% auto 0}.background-content[_ngcontent-%COMP%]   .greetings[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:32pt;padding-top:3.8%;margin-bottom:25%}ion-grid.form-errors[_ngcontent-%COMP%]{margin:0;border:0!important}.form-errors[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:grid;align-items:center;align-content:center;float:left;padding-left:7%;height:100%}.form-errors[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-radius:5pt;padding:5pt 0;font-size:30px;color:#3f3d4d;background-color:salmon}.form-errors[_ngcontent-%COMP%]   .form-errors-content[_ngcontent-%COMP%]{width:80%;padding:13px 0}.form-errors[_ngcontent-%COMP%]   .form-errors-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14pt;padding-left:20%;padding-right:7%;margin:0}.form-login[_ngcontent-%COMP%]{background-color:#fff;border-radius:5pt;margin:15pt auto;max-width:290pt;opacity:90%}.form-login[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background-color:#fff;margin:15px 5px}.button-login[_ngcontent-%COMP%]{font-size:18pt;--background: #3fd4b4;height:65pt;--border-radius: 0 0 5pt 5pt;--border-top-left-radius: 0pt;--border-top-right-radius: 0pt;--border-bottom-left-radius: 5pt;--border-bottom-right-radius: 5pt;margin-bottom:0}.item-wp.item-block[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%], .item-md.item-block[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{padding-right:0}.button-login[_ngcontent-%COMP%]:hover{background-color:#3fd4b4}.select-wp[_ngcontent-%COMP%], .select-md[_ngcontent-%COMP%], .select-ios[_ngcontent-%COMP%]{padding:0}ion-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:25pt;height:25pt;background-color:transparent}.inputs[_ngcontent-%COMP%]{margin:10px auto;width:82.8%;height:50pt;color:#3f3d4d;font-size:14pt;padding:0;--ion-background-color: #fff !important}#serverUrl[_ngcontent-%COMP%]{background:url(link@2x.ab11d1a8115e0c00.png) no-repeat right;background-size:25pt}#credential[_ngcontent-%COMP%]{background:url(icoUser@2x.38575ae292b5c3ef.png) no-repeat right;background-size:25pt}#password[_ngcontent-%COMP%]{background:url(icoSenha@2x.9d4edf487207e152.png) no-repeat right;background-size:25pt}.text-input-ios[_ngcontent-%COMP%], .text-input-wp[_ngcontent-%COMP%], .text-input-md[_ngcontent-%COMP%]{margin:0}.select-city[_ngcontent-%COMP%]{width:100%;max-width:100%}.select-city[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{visibility:hidden}.input-login-img[_ngcontent-%COMP%]{margin-right:0!important}.background-content[_ngcontent-%COMP%]   .contato[_ngcontent-%COMP%]{font-family:NunitoLight,serif;color:#fff;font-size:14pt;text-align:center;margin-top:25pt}.background-content[_ngcontent-%COMP%]   .contato[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}.select-wp[_ngcontent-%COMP%], .text-input-wp[_ngcontent-%COMP%]{border:none;border-bottom:.55px solid #c8c7cc}"]}),c})()}];let y=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[p.iI.forChild(v),p.iI]}),c})(),U=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[f.MD,d.YN,r.bv,y]}),c})()}}]);