"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7653],{7653:(w,f,l)=>{l.r(f),l.d(f,{StudentsFrequencyEditPageModule:()=>v});var p=l(177),m=l(9417),s=l(4742),g=l(7500),b=l(467),e=l(4438),y=l(8399),_=l(8150),q=l(3205),C=l(1765),P=l(8721);function x(i,r){if(1&i&&(e.j41(0,"div",11)(1,"h3",12),e.EFF(2,"Disciplina"),e.k0s(),e.j41(3,"p",13),e.EFF(4),e.k0s()()),2&i){const o=e.XpG();e.R7$(4),e.JRh(o.disciplineName)}}function M(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-item",23)(1,"label")(2,"ion-checkbox",24),e.mxI("ngModelChange",function(n){const c=e.eBV(o).$implicit;return e.DH7(c.present,n)||(c.present=n),e.Njj(n)}),e.bIt("ionChange",function(n){const c=e.eBV(o),a=c.$implicit,d=c.index,u=e.XpG(3);return e.Njj(u.updateFrequency(a,u.classes[d],n.detail.checked))}),e.EFF(3),e.k0s()()()}if(2&i){const o=r.$implicit,t=r.index,n=e.XpG(3);e.R7$(2),e.R50("ngModel",o.present),e.BMQ("aria-label",n.classes[t]),e.R7$(),e.SpI(" ",n.classes[t],"\xaa a ")}}function k(i,r){if(1&i&&(e.j41(0,"ion-list",21),e.DNE(1,M,4,3,"ion-item",22),e.k0s()),2&i){const o=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",o.frequencies)}}function F(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-list")(1,"ion-radio-group",25),e.mxI("ngModelChange",function(n){e.eBV(o);const c=e.XpG().$implicit;return e.DH7(c.present,n)||(c.present=n),e.Njj(n)}),e.bIt("ionChange",function(n){e.eBV(o);const c=e.XpG().$implicit,a=e.XpG();return e.Njj(a.updateFrequency(c,null,n.detail.value))}),e.j41(2,"ion-item",23)(3,"label")(4,"ion-radio",26),e.EFF(5," Presente "),e.k0s()()(),e.j41(6,"ion-item",23)(7,"label")(8,"ion-radio",27),e.EFF(9," Faltou "),e.k0s()()()()()}if(2&i){const o=e.XpG().$implicit;e.R7$(),e.R50("ngModel",o.present),e.R7$(3),e.Y8G("value",!0),e.R7$(4),e.Y8G("value",!1)}}function O(i,r){if(1&i&&(e.j41(0,"ion-row",17)(1,"ion-col")(2,"div",18),e.EFF(3),e.k0s(),e.DNE(4,k,2,1,"ion-list",19)(5,F,10,3,"ion-list",20),e.k0s()()),2&i){const o=r.$implicit,t=e.XpG();e.R7$(3),e.SpI(" ",o.name||o.student.name," "),e.R7$(),e.Y8G("ngIf",!t.globalAbsence),e.R7$(),e.Y8G("ngIf",t.globalAbsence)}}const E=[{path:"",component:(()=>{var i;class r{constructor(t,n,c,a,d,u,h){this.dailyFrequencyStudentService=t,this.utilsService=n,this.auth=c,this.dailyFrequencyStudentsSynchronizer=a,this.connection=d,this.route=u,this.router=h,this.classes=[],this.globalAbsence=!1,this.students=[],this.unityName=null,this.unityId=null,this.classroomName=null,this.classroomId=null,this.disciplineName=null,this.disciplineId=null,this.frequencyDate=null,this.isSavingFrequencies=!1,this.loadingCount=0,this.formatDate=null}ngOnInit(){var t=this;return(0,b.A)(function*(){t.route.queryParams.subscribe(n=>{var c;const a=null===(c=t.router.getCurrentNavigation())||void 0===c?void 0:c.extras.state;t.globalAbsence=JSON.parse(n.global),t.studentsFrequency=t.globalAbsence?null==a?void 0:a.result.daily_frequency:null==a?void 0:a.result.daily_frequencies,t.classes=t.mountClassNumbers(),t.setCurrentClassroom(),t.setCurrentDiscipline(),t.setCurrentUnity(),t.setCurrentFrequencyDate(),t.students=t.mountStudentList();const d=t.utilsService.getDate(t.frequencyDate);d.setHours(24,0,0,0),t.formatDate=t.utilsService.toBrazilianFormat(d)})})()}updateFrequency(t,n=null,c=!1){t.present=c,this.auth.currentUser().subscribe(a=>{this.dailyFrequencyStudentService.updateFrequency({id:t.id,present:t.present,classroomId:this.classroomId,disciplineId:this.disciplineId,studentId:t.student.id,classNumber:n,userId:a.id,frequencyDate:this.frequencyDate}).subscribe({next:u=>{if(this.connection.isOnline){this.loadingCount++;const h=this.loadingCount;this.isSavingFrequencies=!0,this.dailyFrequencyStudentsSynchronizer.sync(u).subscribe({next:()=>{},error:I=>{console.error("Erro ao atualizar frequ\xeancia:",I)},complete:()=>{this.loadingCount===h&&(this.isSavingFrequencies=!1)}})}},error:u=>{console.error("Erro ao atualizar frequ\xeancia:",u)}})})}sortStudents(t,n){return t.sequence>n.sequence?1:t.sequence<n.sequence?-1:(t.name||t.student.name).toUpperCase()>(n.name||n.student.name).toUpperCase()?1:(t.name||t.student.name).toUpperCase()<(n.name||n.student.name).toUpperCase()?-1:0}mountStudentList(){let t;return this.globalAbsence?t=this.studentsFrequency.students:(t=this.studentsFrequency[0].students.map(n=>({...n.student,sequence:n.sequence})),t.forEach(n=>{const c=[];this.studentsFrequency.forEach(a=>{a.students.map(d=>{d.student.id===n.id&&c.push(d)})}),n.frequencies=JSON.parse(JSON.stringify(c))})),t.sort(this.sortStudents)}mountClassNumbers(){return this.globalAbsence?[]:this.studentsFrequency.map(t=>t.class_number)}setCurrentDiscipline(){this.globalAbsence?(this.disciplineId=this.studentsFrequency.discipline_id,this.disciplineName=this.studentsFrequency.discipline_name):(this.disciplineId=this.studentsFrequency[0].discipline_id,this.disciplineName=this.studentsFrequency[0].discipline_name)}setCurrentUnity(){this.globalAbsence?(this.unityId=this.studentsFrequency.unity_id,this.unityName=this.studentsFrequency.unity_name):(this.unityId=this.studentsFrequency[0].unity_id,this.unityName=this.studentsFrequency[0].unity_name)}setCurrentClassroom(){this.globalAbsence?(this.classroomId=this.studentsFrequency.classroom_id,this.classroomName=this.studentsFrequency.classroom_name):(this.classroomId=this.studentsFrequency[0].classroom_id,this.classroomName=this.studentsFrequency[0].classroom_name)}setCurrentFrequencyDate(){this.frequencyDate=this.globalAbsence?this.studentsFrequency.frequency_date:this.studentsFrequency[0].frequency_date}goBack(){this.router.navigate(["/tabs/tab1"])}}return(i=r).\u0275fac=function(t){return new(t||i)(e.rXU(y.w),e.rXU(_.T),e.rXU(q.u),e.rXU(C.c),e.rXU(P.K),e.rXU(g.nX),e.rXU(g.Ix))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-students-frequency-edit"]],decls:26,vars:5,consts:[["mode","md"],["slot","start"],["defaultHref","",3,"click"],[1,"multiple-lines"],["alt","Frequ\xeancia","src","assets/img/students-frequency-edit/ilustraFrequencia@2x.png",1,"students-frequency-edit-img","edit-img"],[1,"title-students-frequency-edit"],[1,"unity-name-students-frequency-edit"],[1,"date-students-frequency-edit"],["id","students-frequency-edit-page",1,"page-content"],[1,"content-page-section"],[1,"details-panel"],[1,"detail"],[1,"detail-title"],[1,"detail-text"],["class","detail",4,"ngIf"],[1,"grid"],["class","grid-row",4,"ngFor","ngForOf"],[1,"grid-row"],[1,"student-name"],["class","frequency-checkbox",4,"ngIf"],[4,"ngIf"],[1,"frequency-checkbox"],["class","frequency-item","lines","none",4,"ngFor","ngForOf"],["lines","none",1,"frequency-item"],[3,"ngModelChange","ionChange","ngModel"],[1,"frequency-checkbox",3,"ngModelChange","ionChange","ngModel"],[1,"global-frequency-present",3,"value"],[1,"global-frequency-absent",3,"value"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-back-button",2),e.bIt("click",function(){return n.goBack()}),e.k0s()()(),e.j41(4,"div",3),e.nrm(5,"img",4),e.j41(6,"p",5),e.EFF(7,"Lista de Frequ\xeancia"),e.k0s(),e.j41(8,"p",6),e.EFF(9),e.k0s(),e.j41(10,"p",7),e.EFF(11),e.k0s()()(),e.j41(12,"ion-content",8)(13,"h3",9),e.EFF(14,"Detalhes da Chamada"),e.k0s(),e.j41(15,"div",10)(16,"div",11)(17,"h3",12),e.EFF(18,"Turma"),e.k0s(),e.j41(19,"p",13),e.EFF(20),e.k0s()(),e.DNE(21,x,5,1,"div",14),e.k0s(),e.j41(22,"h3",9),e.EFF(23,"Lista de Presen\xe7a"),e.k0s(),e.j41(24,"ion-grid",15),e.DNE(25,O,6,3,"ion-row",16),e.k0s()()),2&t&&(e.R7$(9),e.JRh(n.unityName),e.R7$(2),e.JRh(n.formatDate),e.R7$(9),e.JRh(n.classroomName),e.R7$(),e.Y8G("ngIf",n.disciplineName),e.R7$(4),e.Y8G("ngForOf",n.students))},dependencies:[p.Sq,p.bT,m.BC,m.vS,s.QW,s.eY,s.hU,s.W9,s.lO,s.eU,s.uz,s.nf,s.KO,s.f0,s.ln,s.ai,s.hB,s.Je,s.el],styles:[".title-students-frequency-edit[_ngcontent-%COMP%]{font-size:24px;line-height:29px;margin-top:10px;margin-bottom:5px;color:#fff}.unity-name-students-frequency-edit[_ngcontent-%COMP%], .date-students-frequency-edit[_ngcontent-%COMP%]{font-size:14px;line-height:21px;color:#efeef8}.img-close-frequency-edit[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px;width:25px}#students-frequency-edit-page.page-content[_ngcontent-%COMP%]{padding-top:10px;min-height:550px;padding-bottom:calc(15px + env(safe-area-inset-bottom))}.multiple-lines[_ngcontent-%COMP%]{height:150px}.multiple-lines[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0}.multiple-lines[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px}.content-page-section[_ngcontent-%COMP%]{margin-top:5px;font-size:16px;line-height:20px;color:#868499;padding-left:12px}.page-content-title[_ngcontent-%COMP%]{font-size:20px;color:#3f3d4d;padding-top:20px;padding-left:10px}.grid[_ngcontent-%COMP%]{background-color:#fff;margin:10px;border-radius:5px;border:1px solid #dddce6!important;width:auto!important;padding:0;margin-bottom:calc(10px + env(safe-area-inset-bottom))}.grid-row[_ngcontent-%COMP%]{border-bottom:1px solid #dddce6;margin:0;padding:5px 10px}.student-picture[_ngcontent-%COMP%]{width:70px}.student-name[_ngcontent-%COMP%]{font-size:16px;color:#3f3d4d}.frequency-checkbox[_ngcontent-%COMP%]{display:flex;border-radius:5px;background-color:#fff;margin-top:5px;margin-bottom:0}ion-checkbox[_ngcontent-%COMP%]::part(container), ion-radio[_ngcontent-%COMP%]::part(container){display:none}ion-item.frequency-item[_ngcontent-%COMP%]{--background: #ff8870;border-radius:5px;height:40px;width:48px;margin-right:5px}ion-item.frequency-item[_ngcontent-%COMP%]:has(.global-frequency-present), ion-item.frequency-item[_ngcontent-%COMP%]:has(.global-frequency-absent){--background: white;border:1px solid #dddce6;width:110px}ion-item.frequency-item[_ngcontent-%COMP%]:has(.checkbox-checked), ion-item.frequency-item[_ngcontent-%COMP%]:has(.radio-checked.global-frequency-present){--background: #3fd4b4;border-color:#3fd4b4}ion-item.frequency-item[_ngcontent-%COMP%]:has(.radio-checked.global-frequency-absent){--background: #ff8870;border-color:#ff8870}ion-item.frequency-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{max-height:40px;line-height:40px;display:flex;align-items:center;color:#fff}ion-item.frequency-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:has(.global-frequency-present), ion-item.frequency-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:has(.global-frequency-absent){color:#3f3d4d;margin:-10px 0 0 5px}ion-item.frequency-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:has(.radio-checked.global-frequency-present), ion-item.frequency-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:has(.radio-checked.global-frequency-absent){color:#fff}.checkbox-icon[_ngcontent-%COMP%]{visibility:hidden;position:absolute}.frequency-item[_ngcontent-%COMP%]   .checkbox-wp[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .frequency-item[_ngcontent-%COMP%]   .checkbox-ios[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .frequency-item[_ngcontent-%COMP%]   .checkbox-md[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%]{position:absolute!important}.frequency-item.item.item-block.item-wp.item-checkbox[_ngcontent-%COMP%], .frequency-item.item.item-block.item-ios.item-checkbox[_ngcontent-%COMP%], .frequency-item.item.item-block.item-md.item-checkbox[_ngcontent-%COMP%]{padding-left:0!important}ion-checkbox.checkbox.checkbox-wp[_ngcontent-%COMP%], ion-checkbox.checkbox.checkbox-ios[_ngcontent-%COMP%], ion-checkbox.checkbox.checkbox-md[_ngcontent-%COMP%]{margin:0!important}.frequency-item.item.item-block.item-wp.item-checkbox.item-checkbox-checked[_ngcontent-%COMP%], .frequency-item.item.item-block.item-ios.item-checkbox.item-checkbox-checked[_ngcontent-%COMP%], .frequency-item.item.item-block.item-md.item-checkbox.item-checkbox-checked[_ngcontent-%COMP%]{background-color:#3fd4b4}ion-label.frequency-item-label[_ngcontent-%COMP%]{color:#fff!important;height:30px;font-size:16px;width:100%;min-width:18px;margin:0;text-align:center}.global-frequency[_ngcontent-%COMP%]   .radio-icon[_ngcontent-%COMP%]{visibility:hidden;position:absolute}.global-frequency[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #dddce6!important}.global-frequency[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:16px;color:#3f3d4d;text-align:center!important;margin:0!important;padding:0!important}.global-frequency-present[_ngcontent-%COMP%]{width:110px;height:40px}.global-frequency-present.item.item-block.item-wp.item-radio.item-radio-checked[_ngcontent-%COMP%], .global-frequency-present.item.item-block.item-ios.item-radio.item-radio-checked[_ngcontent-%COMP%], .global-frequency-present.item.item-block.item-md.item-radio.item-radio-checked[_ngcontent-%COMP%]{background-color:#3fd4b4;border:0!important}.global-frequency-present.item.item-block.item-wp.item-radio.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .global-frequency-present.item.item-block.item-ios.item-radio.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .global-frequency-present.item.item-block.item-md.item-radio.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .global-frequency-absent.item.item-block.item-wp.item-radio.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .global-frequency-absent.item.item-block.item-ios.item-radio.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .global-frequency-absent.item.item-block.item-md.item-radio.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff!important}.global-frequency-absent[_ngcontent-%COMP%]{width:90px;height:40px;margin-left:10px}.global-frequency-absent.item.item-block.item-wp.item-radio.item-radio-checked[_ngcontent-%COMP%], .global-frequency-absent.item.item-block.item-ios.item-radio.item-radio-checked[_ngcontent-%COMP%], .global-frequency-absent.item.item-block.item-md.item-radio.item-radio-checked[_ngcontent-%COMP%]{background-color:#ff8870;border:0!important}.global-frequency-absent.item.item-block.item-wp[_ngcontent-%COMP%], .global-frequency-present.item.item-block.item-wp[_ngcontent-%COMP%]{padding:0!important}.global-frequency[_ngcontent-%COMP%]   ion-radio.radio.radio-wp[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),r})()}];let S=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.iI.forChild(E),g.iI]}),r})(),v=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[p.MD,m.YN,m.X1,s.bv,S]}),r})()}}]);